<html>
<head>
<title>DecDoc Settings</title>
<meta name="decorator" content="atl.general">
<meta name="decorator" content="atl.admin" />
<meta name="admin.active.section"
	content="admin_plugins_menu/new_plugin_section" />
<meta name="admin.active.tab" content="jira-menu-item1">
$webResourceManager.requireResource("com.atlassian.auiplugin:ajs")
$webResourceManager.requireResource("com.atlassian.auiplugin:aui-select")
$webResourceManager.requireResource("com.atlassian.auiplugin:aui-form-notification")
$webResourceManager.requireResource("com.atlassian.auiplugin:aui-inline-dialog2")
$webResourceManager.requireResource("com.atlassian.auiplugin:aui-toggle")
$webResourceManager.requireResource("de.uhd.ifi.se.decision.documentation.jira:decision-documentation-resources")
<style>
table {
	border-collapse: collapse;
	width: 100%;
}

th, td {
	padding: 8px;
	text-align: left;
	border-bottom: 1px solid #ddd;
}

tr:hover {
	background-color: #f5f5f5
}

h2 {
	margin-top: 0.83em;
	margin-bottom: 0.83em;
}
</style>
</head>
<body>
	<h2>DecDoc Settings</h2>
	<table>
		<tr>
			<th>Project Name</th>
			<th>DecDoc Activated?</th>
			<th>Use JIRA Issues to Store Decision Knowledge?</th>
		</tr>
		#foreach ($proj in $projectsMap)
		<tr>
			<td><aui-label for="$proj.getProjectKey()-toggle">$proj.getProjectName()</aui-label>
			</td>
			<td><aui-toggle id="$proj.getProjectKey()-isActivated-toggle"
					label="$proj.getProjectName()-Activated"
					data-projectKey="$proj.getProjectKey()"></aui-toggle> <script>
						var toggle = document.getElementById('$proj.getProjectKey()-isActivated-toggle');
						#if ($proj.isActivated() == true)
							toggle.checked = true;
						#else
							toggle.checked = false;
						#end
						toggle.addEventListener('change', function(e) {
							var thisToggle = this;
							thisToggle.busy = true;
							flipProjectActivation(thisToggle.checked, thisToggle.dataset.projectkey);
							thisToggle.busy = false;
						});
					</script></td>
			<td><aui-toggle
					id="$proj.getProjectKey()-isIssueStrategy-toggle"
					label="$proj.getProjectName()-IssueStrategy"
					data-projectKey="$proj.getProjectKey()"></aui-toggle> <script>
						var toggle = document.getElementById('$proj.getProjectKey()-isIssueStrategy-toggle');
						#if ($proj.isIssueStrategy() == true)
							toggle.checked = true;
						#else
							toggle.checked = false;
						#end
						toggle.addEventListener('change', function(e) {
							var thisToggle = this;
							thisToggle.busy = true;
							setPersistenceStrategy(thisToggle.checked, thisToggle.dataset.projectkey);
							thisToggle.busy = false;
						});
					</script></td>
		</tr>
		#end
	</table>
</body>
</html>