$webResourceManager.requireResource("de.uhd.ifi.se.decision.management.jira:stylesheet-and-icon-resources")
$webResourceManager.requireResource("de.uhd.ifi.se.decision.management.jira:requirements-dashboard-resources")
<div class="condec-dashboard-contents">
	<h1>
		$i18n.getText("condec.jira.project"): $projectName
	</h1>
	
	<div>
		<h3>General Metrics:</h3>
		<div id="boxplot-CommentsPerJiraIssue" class="notsetyet boxplot"></div>
		<div id="boxplot-CommitsPerJiraIssue" class="notsetyet boxplot"></div>
		<div id="boxplot-DecisionsPerJiraIssue" class="notsetyet boxplot"></div>
		<div id="boxplot-IssuesPerJiraIssue" class="notsetyet boxplot"></div>
		<div id="boxplot-LinkDistanceFromIssue" class="notsetyet boxplot"></div>
		<div id="boxplot-LinkDistanceFromAlternative" class="notsetyet boxplot"></div>
		<div id="boxplot-LinkDistanceFromDecision" class="notsetyet boxplot"></div>
	</div>
	
	<div class="report completeness">
		<h3>Rationale Completeness Metrics</h3>
		<div id="piechartRich-IssuesSolvedByDecision" class="notsetyet piechart"></div>
		<div id="piechartRich-DecisionsSolvingIssues" class="notsetyet piechart"></div>
		<div id="piechartRich-ConArgumentDocumentedForAlternative" class="notsetyet piechart"></div>
		<!--<div id="piechartRich-ConArgumentDocumentedForDecision" class="notsetyet piechart"></div>-->
		<!--<div id="piechartRich-ProArgumentDocumentedForAlternative" class="notsetyet piechart"></div>-->
		<div id="piechartRich-ProArgumentDocumentedForDecision" class="notsetyet piechart"></div>
	</div>
	
	<div class="report inconsistency">
		<h3>Inconsistencies in Decision Making</h3>
		<div id="piechartRich-IssuesSolvedByManyDecisions" class="notsetyet piechart"></div>
		<!--<div id="piechartRich-DecisionsMadeWithFewerProArguments" class="notsetyet piechart"></div>
		<div id="piechartRich-AlternativesRejectedWithFewerConArguments" class="notsetyet piechart"></div>-->
	</div>
	
	<div class="report general">
		<h3>Basic Statistics</h3>
		<div id="piechartRich-DecisionDocumentedForSelectedJiraIssue" class="notsetyet piechart"></div>
		<div id="piechartRich-IssueDocumentedForSelectedJiraIssue" class="notsetyet piechart"></div>
		<div id="piechartInteger-RelevantSentences" class="notsetyet piechart"></div>
		<div id="piechartInteger-KnowledgeTypeDistribution" class="notsetyet piechart"></div>
	</div>
</div>

<script type="text/javascript">
	// initialize charts
	#set($title="")
	#foreach ($name in $chartNamesAndPurpose.keySet())
	#set($purpose=$chartNamesAndPurpose.get("$name"))
	#set($data=$chartNamesAndData.get("$name"))
	dataMap = new Map();
	#foreach ($dataName in $data.keySet())
	dataMap.set("$dataName", "$data.get("$dataName")");
	#end
	conDecReport.initializeChart("$name","$title", "$purpose", dataMap);
	#end
	conDecReport.setJiraBaseUrl("$jiraBaseUrl")
</script>

<!-- TODO: replace with AUI-styled or other with plugin consistent overlay implementations -->
<div id="decKnowElementsOverlay" class="hidden overlay">
	<div class="box">
		<h1>
			Involved decision knowledge elements:
		</h1>
		<div id="extractedDecKnowElements" class="contents">
		</div>
	</div>
</div>

<script>

$(document).ready(function() {
  if (!window.conDecReqDashboard) {
      console.error('Could not find required resources!');
      errorNode = document.getElementById("condec-req-dashboard-fatal-error${dashboardUID}");
      errorNode.classList.remove("hidden");
      return;
  }
  else {
    function projectSelectorOnchange(event) {
        projectName = event.target.value
        selectedOptionIndex = event.target.options.selectedIndex
        selectedOption = event.target.options[selectedOptionIndex]
        conDecReqDashboard.init(projectName,event.target.dataset.uid)
    }
    selectNode = document.getElementById("${selectID}");
    selectNode.addEventListener('change', projectSelectorOnchange);
  }
});
</script>

