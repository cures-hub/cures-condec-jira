<h2>Decision Guidance</h2>

<div class="field-group">
	<label for="isActivated-toggle">DBPedia activated?</label>
	<aui-toggle id="isActivated-toggle" value="$projectKey"	label="ConDec Activated?"></aui-toggle>
	<div class="description">Enables or disables the knowledge source for alternative recommendations for this project.
	</div>
</div>

<div class="field-group top-label">
    <label for="max-recommendation">Maximum number of results</label>
    <input class="text short-field"
           type="number"
           data-aui-validation-field
           value="$maxNumberRecommendations"
           id="max-recommendation"
           name="max-recommendation">

    <button id="save-max-recommendation-btn" class='aui-button aui-button-primary aui-button-compact'>
        Save
    </button>
    <div class="description">Set the maximum number of results of recommendations that should be displayed in the jira issue view.
    </div>
</div>



<h4>Evaluation of Knowledge sources</h4>

<div class="field-group">
    <label for="trainClassifier-button">Train the Classifier</label>
    <select id="select-arff-file-train" name="select-arff-file-train" class="select medium-field">
        #foreach ($arffFile in $arffFiles)
         <!--   <option value="$arffFile"
                #if ($arffFile.toString().contains($selectedArffFile))
                    selected
                #end
            >
                $arffFile</option>-->
        #end
        <option>DBPedia</option>
    </select>
    <input type="button" class="aui-button" id="trainClassifier-button" value="Evaluate"/>
    <div class="description">
        Evaluates the selected knowledge source. <br/>
    </div>
    <div class="aui-progress-indicator">
        <span id="evaluate-knowledgesource-progress"></span>
    </div>
</div>
	
<script>


    $(document).ready(function() {
        $("#save-max-recommendation-btn").click((event) => {
           event.preventDefault();
           const query = $("#max-recommendation").val();
           conDecAPI.setMaxNumberRecommendations("$projectKey", query);
        })
    });

	var activationToggle = document.getElementById("isActivated-toggle");
	if ($project.isActivated() == true) {
		activationToggle.checked = true;
	} else {
		activationToggle.checked = false;
	}
	
	activationToggle.addEventListener("change", function(error) {
		this.busy = true;
		conDecAPI.setActivated(this.checked, this.value);
		this.busy = false;
	});
	
	var strategyToggle = document.getElementById("isIssueStrategy-toggle");
	if ($project.isIssueStrategy() == true) {
		strategyToggle.checked = true;
	} else {
		strategyToggle.checked = false;
	}
	
	strategyToggle.addEventListener("change", function(error) {
		this.busy = true;
		conDecAPI.setIssueStrategy(this.checked, this.value);
		this.busy = false;
	});
	
    var cleanDatabasesButton = document.getElementById("cleanDatabases");
    cleanDatabasesButton.addEventListener("click", function () {
        conDecAPI.cleanDatabases("$projectKey");
    });
</script>