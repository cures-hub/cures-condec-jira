os: osx # only because osx is less often used than linux on TravisCI and makes building faster
language: java
cache:
  directories:
    - $HOME/.m2
jdk:
  - oraclejdk15
before_install:
  - wget https://marketplace.atlassian.com/download/plugins/atlassian-plugin-sdk-tgz
  - mkdir opt
  - tar -xvzf *plugin-sdk* -C opt
  - mv opt/*plugin-sdk* opt/atlassian-plugin-sdk
  - chmod a+x opt/atlassian-plugin-sdk/bin/*
  - chmod a+x opt/atlassian-plugin-sdk/apache-maven-*/bin/*
  - export PATH=opt/atlassian-plugin-sdk/bin:opt/atlassian-plugin-sdk/apache-maven-*/bin:$PATH
install: true
script:
  - atlas-package -P jacoco -q -Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true
notifications:
  email: false
deploy:
  provider: releases
  file: $TRAVIS_BUILD_DIR/target/cures-condec-jira.jar
  token: $GITHUB_TOKEN
  on:
      tags: false
  overwrite: true
after_success:
  - bash <(curl -s https://codecov.io/bash) -f $TRAVIS_BUILD_DIR/target/site/jacoco/jacoco.xml
env:
  global:
    secure: nJlN6rFliMZ0zmTlbsDFpeaOcJVpGabx/17LE2tZP+chpjuOnMxW7axd7lasoAGkJ7ikRS6dZQiUaIQ0wmVLPp4t/5rWJfaR815917aIeVqvondC+N5cg7318d5bPFa+qWaQMOS4IgMwK5DqPGerA+K4ypHC+Qo/tm9SQdVfN+aWD+TrdUHofGGLiMzpB+Ii5VKXP61emtlFNk6u0pkkDOYkWO1YLwHCz93DsLuXyULecshwUi9xiqmj3kpAT+nKcMuJIs08IbztqxLnMiBjWmfd78uXOt0xVvWRRDEIZPomlVvZGH+xVDGYBKsyFQSQGg1QuHdyCMgoSekVKo51kZ4WnwHgkc2TiwvcV2ki+07kLASAP4+z16mt+JIqCb+xfTw8sCG5mu4QuvqCvWt9We9GGBvUV2+YjZlo3zDUSrjW+QPgQX60ce2iqYItMjFiVOvhHhL6sauGQAs0G8+o6cINuSuCGaMSLdKVPL7muX2eCr+32Hp+DpXOJUSLw//42LRbmxmWHEtfPlsv41JcA7Q6XO3gnwkHuS+B51Szx04y+eVAmU7iAVtgktcXK10oGtmgLgMhYPOfx/x2hMjSSTv+wuiqtciv1Ced5TV7txoImi/EC9i9XxkibURVPqN5RNddAt0JpiNqDHUOReuPRn9Tkvd9OkY0XSZBho8HARs=
